<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
    <div class="col-md-3 col-lg-2 d-md-block sidebar collapse">
      <!-- Seu sidebar aqui -->
    </div>

    <!-- Main Content -->
    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Novo Superusuário</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          <button type="button" class="btn btn-sm btn-outline-secondary" (click)="voltar()">
            ← Voltar
          </button>
        </div>
      </div>

      <div class="row justify-content-center">
        <div class="col-12 col-md-8 col-lg-6">
          <div class="card">
            <div class="card-header">
              <h5 class="card-title mb-0">Cadastrar Novo Superusuário</h5>
            </div>
            <div class="card-body">
              
              <!-- Mensagens -->
              <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert">
                {{ errorMessage }}
                <button type="button" class="btn-close" (click)="errorMessage = ''"></button>
              </div>

              <div *ngIf="successMessage" class="alert alert-success alert-dismissible fade show" role="alert">
                {{ successMessage }}
                <button type="button" class="btn-close" (click)="successMessage = ''"></button>
              </div>

              <!-- Formulário -->
              <form #formSuperusuario="ngForm">
                
                <!-- CPF -->
                <div class="mb-3">
                  <label for="cpf" class="form-label">CPF *</label>
                  <input
                    type="text"
                    id="cpf"
                    name="cpf"
                    class="form-control"
                    [(ngModel)]="superusuario.cpf"
                    #cpf="ngModel"
                    (input)="onCpfInput(); onInputChange()"
                    required
                    [disabled]="isLoading"
                    placeholder="000.000.000-00"
                    maxlength="14"
                  />
                  <div *ngIf="cpf.invalid && (cpf.dirty || cpf.touched)" class="form-text text-danger">
                    <small *ngIf="cpf.errors?.['required']">CPF é obrigatório.</small>
                  </div>
                </div>

                <!-- Nome -->
                <div class="mb-3">
                  <label for="nome" class="form-label">Nome Completo *</label>
                  <input
                    type="text"
                    id="nome"
                    name="nome"
                    class="form-control"
                    [(ngModel)]="superusuario.nome"
                    #nome="ngModel"
                    (input)="onInputChange()"
                    required
                    [disabled]="isLoading"
                    placeholder="Nome completo do superusuário"
                  />
                  <div *ngIf="nome.invalid && (nome.dirty || nome.touched)" class="form-text text-danger">
                    <small *ngIf="nome.errors?.['required']">Nome é obrigatório.</small>
                  </div>
                </div>

                <!-- Email -->
                <div class="mb-3">
                  <label for="email" class="form-label">E-mail *</label>
                  <input
                    type="email"
                    id="email"
                    name="email"
                    class="form-control"
                    [(ngModel)]="superusuario.email"
                    #email="ngModel"
                    (input)="onInputChange()"
                    required
                    email
                    [disabled]="isLoading"
                    placeholder="superusuario@exemplo.com"
                  />
                  <div *ngIf="email.invalid && (email.dirty || email.touched)" class="form-text text-danger">
                    <small *ngIf="email.errors?.['required']">E-mail é obrigatório.</small>
                    <small *ngIf="email.errors?.['email']">E-mail inválido.</small>
                  </div>
                </div>

                <!-- Senha -->
                <div class="mb-3">
                  <label for="senha" class="form-label">Senha *</label>
                  <input
                    type="password"
                    id="senha"
                    name="senha"
                    class="form-control"
                    [(ngModel)]="superusuario.senha"
                    #senha="ngModel"
                    (input)="onInputChange()"
                    required
                    [disabled]="isLoading"
                    placeholder="Mínimo 3 caracteres"
                    minlength="3"
                  />
                  <div *ngIf="senha.invalid && (senha.dirty || senha.touched)" class="form-text text-danger">
                    <small *ngIf="senha.errors?.['required']">Senha é obrigatória.</small>
                    <small *ngIf="senha.errors?.['minlength']">A senha deve ter pelo menos 3 caracteres.</small>
                  </div>
                </div>

                <!-- Confirmar Senha -->
                <div class="mb-4">
                  <label for="confirmarSenha" class="form-label">Confirmar Senha *</label>
                  <input
                    type="password"
                    id="confirmarSenha"
                    name="confirmarSenha"
                    class="form-control"
                    [(ngModel)]="superusuario.confirmarSenha"
                    #confirmarSenha="ngModel"
                    (input)="onInputChange()"
                    required
                    [disabled]="isLoading"
                    placeholder="Digite a senha novamente"
                  />
                  <div *ngIf="confirmarSenha.invalid && (confirmarSenha.dirty || confirmarSenha.touched)" class="form-text text-danger">
                    <small *ngIf="confirmarSenha.errors?.['required']">Confirmação de senha é obrigatória.</small>
                  </div>
                </div>

                <!-- Botões -->
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                  <button
                    type="button"
                    class="btn btn-secondary me-md-2"
                    (click)="voltar()"
                    [disabled]="isLoading"
                  >
                    Cancelar
                  </button>
                  <button
                    class="btn btn-primary"
                    type="submit"
                    (click)="onSubmit()"
                    [disabled]="isLoading"
                  >
                    <span *ngIf="!isLoading">Criar Superusuário</span>
                    <span *ngIf="isLoading">
                      <span class="spinner-border spinner-border-sm" role="status"></span>
                      Criando...
                    </span>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>